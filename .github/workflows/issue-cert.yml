name: issue-cert

on:
  workflow_dispatch:
  schedule:
    - cron: '30 9 16 * *'

jobs:
  container-test-job:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/ryabukha/acme.sh:dev
      env:
        CF_Token: ${{ secrets.CF_Token }}
        CF_Account_ID: ${{ secrets.CF_Account_ID }}
        AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
        AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        AWS_DEFAULT_REGION: ${{ secrets.AWS_DEFAULT_REGION }}
        AWS_CERTIFICATE_ARN: ${{ secrets.AWS_CERTIFICATE_ARN }}
        MY_DOMAIN: ${{ secrets.MY_DOMAIN }}
    steps:
      - name: /cert-issue.sh
        run: (/cert-issue.sh)
